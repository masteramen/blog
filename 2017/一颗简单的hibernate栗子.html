<!-- build time:Sat Oct 27 2018 21:00:18 GMT+0800 (CST) --><!DOCTYPE html><html class="theme-next muse use-motion"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4"><link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222"><meta name="description" content="一颗简单的hibernate栗子Hibernate是一个开源的ORM框架,顾名思义，它的核心思想即ORM（Object Relational Mapping,对象关系映射），可以通过对象来操作数据库中的信息，据说开发者一开始是不太熟悉数据库SQL语句的，这也造就了hibernate的强大之处，它不强求开发者熟悉SQL语句也可以操作数据库,hibernate可以自动生成SQL语句，自动执行。利用hi"><meta name="keywords" content="JAVA,面试"><meta property="og:type" content="article"><meta property="og:title" content="一颗简单的hibernate栗子"><meta property="og:url" content="http://www.jfox.info/2017/一颗简单的hibernate栗子.html"><meta property="og:site_name" content="java面试"><meta property="og:description" content="一颗简单的hibernate栗子Hibernate是一个开源的ORM框架,顾名思义，它的核心思想即ORM（Object Relational Mapping,对象关系映射），可以通过对象来操作数据库中的信息，据说开发者一开始是不太熟悉数据库SQL语句的，这也造就了hibernate的强大之处，它不强求开发者熟悉SQL语句也可以操作数据库,hibernate可以自动生成SQL语句，自动执行。利用hi"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://www.jfox.info/2017/1338/05f73f3.png"><meta property="og:image" content="http://www.jfox.info/2017/1338/bd47d85.png"><meta property="og:image" content="http://www.jfox.info/2017/1338/ea725e0.gif"><meta property="og:image" content="http://www.jfox.info/wp-content/uploads/2017/07/15000404071.gif"><meta property="og:image" content="http://www.jfox.info/2017/1338/ea725e0.gif"><meta property="og:image" content="http://www.jfox.info/wp-content/uploads/2017/07/15000404071.gif"><meta property="og:image" content="http://www.jfox.info/2017/1338/ea725e0.gif"><meta property="og:image" content="http://www.jfox.info/wp-content/uploads/2017/07/15000404071.gif"><meta property="og:image" content="http://www.jfox.info/2017/1338/ea725e0.gif"><meta property="og:image" content="http://www.jfox.info/wp-content/uploads/2017/07/15000404071.gif"><meta property="og:updated_time" content="2018-10-27T12:29:39.635Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="一颗简单的hibernate栗子"><meta name="twitter:description" content="一颗简单的hibernate栗子Hibernate是一个开源的ORM框架,顾名思义，它的核心思想即ORM（Object Relational Mapping,对象关系映射），可以通过对象来操作数据库中的信息，据说开发者一开始是不太熟悉数据库SQL语句的，这也造就了hibernate的强大之处，它不强求开发者熟悉SQL语句也可以操作数据库,hibernate可以自动生成SQL语句，自动执行。利用hi"><meta name="twitter:image" content="http://www.jfox.info/2017/1338/05f73f3.png"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Muse",version:"5.1.4",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"Author"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://www.jfox.info/2017/一颗简单的hibernate栗子.html"><title>一颗简单的hibernate栗子 | java面试</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh_CN"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">java面试</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle"></p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>Archives</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://www.jfox.info/2017/一颗简单的hibernate栗子.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Hello"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="java面试"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">一颗简单的hibernate栗子</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-01T23:57:18+08:00">2017-01-01</time></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="一颗简单的hibernate栗子"><a href="#一颗简单的hibernate栗子" class="headerlink" title="一颗简单的hibernate栗子"></a>一颗简单的hibernate栗子</h1><p>Hibernate是一个开源的ORM框架,顾名思义，它的核心思想即ORM（Object Relational Mapping,对象关系映射），可以通过对象来操作数据库中的信息，据说开发者一开始是不太熟悉数据库SQL语句的，这也造就了hibernate的强大之处，它不强求开发者熟悉SQL语句也可以操作数据库,hibernate可以自动生成SQL语句，自动执行。</p><p>利用hibernate可以让开发者完全使用面想对象思维来操作数据库，所以接下来的演示不会有一句SQL语句，如果有的话，请当我这句话没说！</p><p>本文使用hibernate实现了简单的对一个person数据表的基本增删改查操作。<img src="/2017/1338/05f73f3.png" alt=""></p><h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><p>环境：win7+eclipse</p><p>工具包:hibernate包，可前往<a href="http://hibernate.org/orm/downloads/下载，本例中使用的是4版本；" target="_blank" rel="noopener">http://hibernate.org/orm/downloads/下载，本例中使用的是4版本；</a></p><p>数据库连接驱动包，本例中使用的是mysql的</p><h1 id="程序结构图示"><a href="#程序结构图示" class="headerlink" title="程序结构图示"></a>程序结构图示</h1><p><img src="/2017/1338/bd47d85.png" alt=""></p><h1 id="pojo层实体类"><a href="#pojo层实体类" class="headerlink" title="pojo层实体类"></a>pojo层实体类</h1><pre><code>package demo.pojo;

public class Person {

    private Integer id;
    private String name;
    private String gender;
    private Integer age;

    public Integer getId() {
        return id;
    }
    public void setId(Integer id) {
        this.id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getGender() {
        return gender;
    }
    public void setGender(String gender) {
        this.gender = gender;
    }
    public Integer getAge() {
        return age;
    }
    public void setAge(Integer age) {
        this.age = age;
    }
    @Override
    public String toString() {
        return &quot;Person [id=&quot; + id + &quot;, name=&quot; + name + &quot;, gender=&quot; + gender + &quot;, age=&quot; + age + &quot;]&quot;;
    }


}
</code></pre><h1 id="核心配置文件hibernate-cfg-xml"><a href="#核心配置文件hibernate-cfg-xml" class="headerlink" title="核心配置文件hibernate.cfg.xml"></a>核心配置文件hibernate.cfg.xml</h1><pre><code>1&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; 2&lt;!DOCTYPE hibernate-configuration PUBLIC
3    &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;
4    &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt; 5&lt;hibernate-configuration&gt; 6&lt;session-factory&gt; 7&lt;!-- 以下四行分别为：数据库驱动类、Drivermanager获取连接的参数URL、用户名、密码  --&gt; 8&lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt; 9&lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://127.0.0.1/web?characterEcoding=utf-8&lt;/property&gt;10&lt;property name=&quot;connection.username&quot;&gt;root&lt;/property&gt;11&lt;property name=&quot;connection.password&quot;&gt;123456&lt;/property&gt;12&lt;!-- 设置方言，hibernate会根据数据库的类型相应生成SQL语句 --&gt;13&lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;1415&lt;!-- 控制台显示生成的sql语句，默认为false --&gt;16&lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;17&lt;!-- 映射配置源文件的位置 --&gt;18&lt;mapping resource=&quot;demo/pojo/Person.hbm.xml&quot;/&gt;19&lt;/session-factory&gt;2021&lt;/hibernate-configuration&gt;
</code></pre><h1 id="映射文件Person-hbm-xml"><a href="#映射文件Person-hbm-xml" class="headerlink" title="映射文件Person.hbm.xml"></a>映射文件Person.hbm.xml</h1><p><img src="/2017/1338/ea725e0.gif" alt=""><img src="/wp-content/uploads/2017/07/15000404071.gif" alt=""><br>1&lt;?xml version=”1.0” encoding=”UTF-8”?&gt; 2&lt;!DOCTYPE hibernate-mapping PUBLIC<br>3 “-//Hibernate/Hibernate Mapping DTD 3.0//EN”<br>4 “<a href="http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;" target="_blank" rel="noopener">http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;</a> 5<hibernate-mapping>6 7<class name="demo.pojo.Person" table="Person">8<id name="id" column="id">910<generator class="native"></generator>11</id>1218<property name="name" column="name"></property>19<property name="gender" column="sex"></property>20<property name="age"></property>21</class>22</hibernate-mapping></p><p>View Code</p><h1 id="Session工厂类"><a href="#Session工厂类" class="headerlink" title="Session工厂类"></a>Session工厂类</h1><p><img src="/2017/1338/ea725e0.gif" alt=""><img src="/wp-content/uploads/2017/07/15000404071.gif" alt=""><br>1package demo.util;<br>2 3import org.hibernate.Session;<br>4import org.hibernate.SessionFactory;<br>5import org.hibernate.cfg.Configuration;<br>6import org.hibernate.service.ServiceRegistry;<br>7import org.hibernate.service.ServiceRegistryBuilder;<br>8 9publicclass HibernateSessionFactory {<br>10privatestatic SessionFactory factory;<br>11privatestatic ThreadLocal<session>thread = new ThreadLocal<session>();<br>12privatestatic String path = “hibernate.cfg.xml”;<br>13privatestatic Configuration config = new Configuration();<br>14static {<br>15 config.configure(path);<br>16 ServiceRegistry service = new ServiceRegistryBuilder()//定义一个服务注册机17 .applySettings(config.getProperties()).buildServiceRegistry();<br>18 factory = config.buildSessionFactory(service);//创建Session工厂类19 }<br>2021publicstatic Session getSession() {<br>22 Session session = thread.get();<br>23if(session == null || !session.isOpen()) {<br>24 session = factory.openSession();<br>25 thread.set(session);<br>26 }<br>27return session;<br>28 }<br>2930publicstaticvoid closeSession() {<br>31 Session session = thread.get();<br>32if(session != null &amp;&amp; session.isOpen()) {<br>33 session.close();<br>34 thread.set(null);<br>35 }<br>36 }<br>3738 }</session></session></p><p>View Code</p><h1 id="DAO层封装数据各项操作的方法"><a href="#DAO层封装数据各项操作的方法" class="headerlink" title="DAO层封装数据各项操作的方法"></a>DAO层封装数据各项操作的方法</h1><p><img src="/2017/1338/ea725e0.gif" alt=""><img src="/wp-content/uploads/2017/07/15000404071.gif" alt=""><br>1package demo.dao;<br>2 3import java.io.Serializable;<br>4import org.hibernate.Session;<br>5import org.hibernate.Transaction;<br>6import demo.pojo.Person;<br>7import demo.util.HibernateSessionFactory;<br>8 9publicclass PersonDaoImpl {<br>10//增删改查，此处以增为例11publicboolean add(Person p) {<br>12 Session session = HibernateSessionFactory.getSession();//创建Session13 Transaction trans = session.beginTransaction();//开启事务14try {<br>15 Serializable id = session.save(p);//添加记录并获取主键值16 System.out.println(id+”为获取的主键值”);//控制台查看主键值17 trans.commit();//提交事务18returntrue;<br>19 } catch (Exception e) {<br>20 trans.rollback();//获取异常，则事务回滚21 } finally {<br>22 HibernateSessionFactory.closeSession();//关闭Session23 }<br>24returnfalse;<br>25 }<br>26 }</p><p>View Code</p><h1 id="测试类TestPerson"><a href="#测试类TestPerson" class="headerlink" title="测试类TestPerson"></a>测试类TestPerson</h1><p><img src="/2017/1338/ea725e0.gif" alt=""><img src="/wp-content/uploads/2017/07/15000404071.gif" alt=""><br>1package demo.test;<br>2 3import org.junit.Test;<br>4import demo.dao.PersonDaoImpl;<br>5import demo.pojo.Person;<br>6 7publicclass TestPerson {<br>8 @Test<br>9publicvoid testAdd() {<br>10//创建一个人类对象11 Person p = new Person();<br>12 p.setName(“张三”);<br>13 p.setGender(“男”);<br>14 p.setAge(18);<br>15//创建dao层类对象并调用添加方法16 PersonDaoImpl dao = new PersonDaoImpl();<br>17 dao.add(p);<br>18 }<br>19 }</p><p>View Code</p></div><div style="width:300px;height:250px;float:left"><ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-9477174171188196" data-ad-slot="4142158067"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div style="width:300px;height:250px;float:left"><ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-9477174171188196" data-ad-slot="5618891265"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2017/jboot10beta1发布基于jfinal类似springboot的框架.html" rel="next" title="jboot 1.0-beta1 发布，基于 Jfinal 类似 Springboot 的框架"><i class="fa fa-chevron-left"></i> jboot 1.0-beta1 发布，基于 Jfinal 类似 Springboot 的框架</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2017/kotlin和javaee让二者的转换更顺畅.html" rel="prev" title="Kotlin和Java EE: 让二者的转换更顺畅">Kotlin和Java EE: 让二者的转换更顺畅 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">Table of Contents</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">Overview</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">Hello</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">1358</span> <span class="site-state-item-name">posts</span></a></div></nav></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#一颗简单的hibernate栗子"><span class="nav-number">1.</span> <span class="nav-text">一颗简单的hibernate栗子</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#准备工作"><span class="nav-number">2.</span> <span class="nav-text">准备工作</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#程序结构图示"><span class="nav-number">3.</span> <span class="nav-text">程序结构图示</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#pojo层实体类"><span class="nav-number">4.</span> <span class="nav-text">pojo层实体类</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#核心配置文件hibernate-cfg-xml"><span class="nav-number">5.</span> <span class="nav-text">核心配置文件hibernate.cfg.xml</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#映射文件Person-hbm-xml"><span class="nav-number">6.</span> <span class="nav-text">映射文件Person.hbm.xml</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Session工厂类"><span class="nav-number">7.</span> <span class="nav-text">Session工厂类</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DAO层封装数据各项操作的方法"><span class="nav-number">8.</span> <span class="nav-text">DAO层封装数据各项操作的方法</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#测试类TestPerson"><span class="nav-number">9.</span> <span class="nav-text">测试类TestPerson</span></a></li></ol></div></div></section></div></aside><div class="sfix"><div class="fixedme"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9477174171188196" data-ad-slot="9597600460" data-ad-format="auto"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></div></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2018</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Hello</span></div><div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div><span class="post-meta-divider">|</span><div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script></body></html><!-- rebuild by neat -->