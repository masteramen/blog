<!-- build time:Sat Oct 27 2018 21:00:16 GMT+0800 (CST) --><!DOCTYPE html><html class="theme-next muse use-motion"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4"><link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222"><meta name="description" content="本章节将带你学习Struts2 应用程序所需的基本配置。在这里可以看到哪些将被配置到一些重要的配置文件中：web.xml、struts.xml、struts-config.xml以及struts.properties。实际上，你可以继续依赖于使用web.xml和struts.xml配置文件，并且你已经在前面的章节中了解到，我们的示例是使用这两个文件运作的，不过为了让你了解更多，我们还是再来说明一下"><meta name="keywords" content="JAVA,面试"><meta property="og:type" content="article"><meta property="og:title" content="(六)Struts2 配置文件"><meta property="og:url" content="http://www.jfox.info/2017/六struts2配置文件.html"><meta property="og:site_name" content="java面试"><meta property="og:description" content="本章节将带你学习Struts2 应用程序所需的基本配置。在这里可以看到哪些将被配置到一些重要的配置文件中：web.xml、struts.xml、struts-config.xml以及struts.properties。实际上，你可以继续依赖于使用web.xml和struts.xml配置文件，并且你已经在前面的章节中了解到，我们的示例是使用这两个文件运作的，不过为了让你了解更多，我们还是再来说明一下"><meta property="og:locale" content="zh_CN"><meta property="og:updated_time" content="2018-10-27T12:29:40.333Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="(六)Struts2 配置文件"><meta name="twitter:description" content="本章节将带你学习Struts2 应用程序所需的基本配置。在这里可以看到哪些将被配置到一些重要的配置文件中：web.xml、struts.xml、struts-config.xml以及struts.properties。实际上，你可以继续依赖于使用web.xml和struts.xml配置文件，并且你已经在前面的章节中了解到，我们的示例是使用这两个文件运作的，不过为了让你了解更多，我们还是再来说明一下"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Muse",version:"5.1.4",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"Author"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://www.jfox.info/2017/六struts2配置文件.html"><title>(六)Struts2 配置文件 | java面试</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh_CN"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">java面试</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle"></p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>Archives</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://www.jfox.info/2017/六struts2配置文件.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Hello"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="java面试"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">(六)Struts2 配置文件</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-01T23:59:31+08:00">2017-01-01</time></span></div></header><div class="post-body" itemprop="articleBody"><p>本章节将带你学习Struts2 应用程序所需的基本配置。在这里可以看到哪些将被配置到一些重要的配置文件中：<strong>web.xml</strong>、<strong>struts.xml</strong>、<strong>struts-config.xml</strong>以及<strong>struts.properties</strong>。</p><p>实际上，你可以继续依赖于使用web.xml和struts.xml配置文件，并且你已经在前面的章节中了解到，我们的示例是使用这两个文件运作的，不过为了让你了解更多，我们还是再来说明一下其他的文件。</p><h2 id="web-xml文件"><a href="#web-xml文件" class="headerlink" title="web.xml文件"></a>web.xml文件</h2><p>web.xml配置文件是一种J2EE配置文件，决定servlet容器的HTTP元素需求如何进行处理。它严格来说不是一个Struts2 配置文件，但它是Struts2 运作所需要进行配置的文件。</p><p>正如前面所讨论的，这个文件为每个web应用程序提供接入点。在部署描述符（web.xml）中，Struts2 应用程序的接入点将会定义为一个过滤器。因此我们将在web.xml里定义一个FilterDispatcher类的接入点，而这个web.xml文件需要在<strong>WebContent/WEB-INF</strong>文件夹下创建。</p><p>如果你开始时没有模板或工具（比如Eclipse或Maven2）的辅助来生成，那这就是第一个你需要配置的文件。下面是我们在上一个例子中用到的web.xml的内容。</p><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
   xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; 
   xmlns:web=&quot;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;
   xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee 
   http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;
   id=&quot;WebApp_ID&quot; version=&quot;3.0&quot;&gt;

   &lt;display-name&gt;Struts 2&lt;/display-name&gt;
   &lt;welcome-file-list&gt;
      &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
   &lt;/welcome-file-list&gt;

   &lt;filter&gt;
      &lt;filter-name&gt;struts2&lt;/filter-name&gt;
      &lt;filter-class&gt;
         org.apache.struts2.dispatcher.FilterDispatcher
      &lt;/filter-class&gt;
   &lt;/filter&gt;

   &lt;filter-mapping&gt;
      &lt;filter-name&gt;struts2&lt;/filter-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
   &lt;/filter-mapping&gt;

&lt;/web-app&gt;
</code></pre><p>注意，我们将Struts2 过滤器映射到 <strong>/* </strong>，而不是<strong> /*.action </strong>，这意味着所有的url都会被Struts过滤器解析。当我们学到关于注解的章节时会对这个进行讨论。</p><h2 id="struts-xml文件"><a href="#struts-xml文件" class="headerlink" title="struts.xml文件"></a>struts.xml文件</h2><p><strong>struts.xml</strong>文件包含有随着Actions的开发你将要修改的配置信息。它可用于覆盖应用程序的默认设置，例如：struts.devMode=false 以及其他定义为属性文件的设置。这个文件可在<br><strong>WEB-INF/classes</strong>文件夹下创建。</p><p>让我们来看一下在前一章节中阐述的Hello World示例里创建的struts.xml文件。</p><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE struts PUBLIC
   &quot;-//Apache Software Foundation//DTD Struts Configuration 2.0//EN&quot;
   &quot;http://struts.apache.org/dtds/struts-2.0.dtd&quot;&gt;
&lt;struts&gt;
   &lt;constant name=&quot;struts.devMode&quot; value=&quot;true&quot; /&gt;
   &lt;package name=&quot;helloworld&quot; extends=&quot;struts-default&quot;&gt;

      &lt;action name=&quot;hello&quot; 
            class=&quot;cn.w3cschool.struts2.HelloWorldAction&quot; 
            method=&quot;execute&quot;&gt;
            &lt;result name=&quot;success&quot;&gt;/HelloWorld.jsp&lt;/result&gt;
      &lt;/action&gt;
      &lt;-- more actions can be listed here --&gt;

   &lt;/package&gt;
   &lt;-- more packages can be listed here --&gt;

&lt;/struts&gt;
</code></pre><p>首先要注意的是<strong>DOCTYPE</strong>（文档类型）。如我们的示例所示，所有的Struts配置文件都需要有正确的doctype。<struts>是根标记元素，在其下，我们使用<package>标签声明不同的包。 这里的<package>标签允许配置的分离和模块化。这在你进行一个大的项目并且项目分为多个不同的模块时，是非常有用的。</package></package></struts></p><p>如果您的项目有三个域：business_applicaiton、customer_application和staff_application的话，你可以创建三个包，并将相关的Actions存储到相应的包中。<package>标签具有以下属性：<br>属性描述name（必需）为package的唯一标识extends指定package继承另一package的所有配置。通常情况下，我们使用struts-default作为package的基础。abstract定义package为抽象的。如果标记为true，则package不能被最终用户使用。namespaceActions的唯一命名空间<br><strong><constant></constant></strong>标签以及name和value属性将用于覆盖<strong>default.properties</strong>中定义的任一属性，就像我们设置的<strong>struts.devMode</strong>属性一样。设置<strong>struts.devMode</strong>属性允许我们在日志文件中查看更多的调试消息。</package></p><p>我们定义<strong><action></action></strong>标签对应于我们想要访问的每个URL，并且使用execute()方法定义一个访问相应的URL时将要访问的类。</p><p>Results（结果）确定在执行操作后返回到浏览器的内容，而从操作返回的字符串应该是结果的名称。 Results按上述方式配置，或作为“全局”结果配置，可用于包中的每个操作。 Results有<strong>name</strong>和<strong>type</strong>属性可选，默认的name值是“success”。<br>Struts.xml文件可以随着时间的推移而增长，因此通过包打破它是使它模块化的一种方式，但struts提供了另一种模块化struts.xml文件的方法，你可以将文件拆分为多个xml文件，并用以下方式导入它们。</p><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE struts PUBLIC
    &quot;-//Apache Software Foundation//DTD Struts Configuration 2.0//EN&quot;
    &quot;http://struts.apache.org/dtds/struts-2.0.dtd&quot;&gt;
&lt;struts&gt;
     &lt;include file=&quot;my-struts1.xml&quot;/&gt;
     &lt;include file=&quot;my-struts2.xml&quot;/&gt;
&lt;/struts&gt;
</code></pre><p>我们没有覆盖的另一个配置文件是struts-default.xml。此文件包含Struts的标准配置设置，你不必再为99.99％的项目重复这些设置。 因此，我们不会深入了解这个文件的太多细节。如果你有兴趣，可以查看在struts2-core-2.2.3.jar文件中可用的<strong>default.properties</strong>文件。</p><h2 id="struts-config-xml文件"><a href="#struts-config-xml文件" class="headerlink" title="struts-config.xml文件"></a>struts-config.xml文件</h2><p>struts-config.xml配置文件是Web Client中View和Model组件之间的链接，但在你99.99％的项目里你不必使用这些设置。 struts-config.xml配置文件包含以下主要元素：<br>序号拦截器和说明1<strong>struts-config</strong><br>这是配置文件的根节点。<br>2<strong>form-beans</strong><br>这是你将ActionForm子类映射到name的位置，你可以在struts-config.xml文件的其余部分，甚至在JSP页面上，将这个name用作ActionForm的别名。<br>3<strong>global forwards</strong><br>此部分将你在webapp上的页面映射到name，你可以使用这个name来引用实际页面。这避免了对你网页上的URL进行硬编码。<br>4<strong>action-mappings</strong><br>这是你声明表单处理程序的地方，也被称为<strong>操作映射（action mappings）</strong>。<br>5<strong>controller</strong><br>这部分是配置Struts的内部，在实际情况中很少使用。<br>6<strong>plug-in</strong><br>这部分告诉Struts在哪里找到属性文件，它包含提示和错误消息。</p><p>下面是struts-config.xml文件的示例：</p><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; ?&gt;
&lt;!DOCTYPE struts-config PUBLIC
&quot;-//Apache Software Foundation//DTD Struts Configuration 1.0//EN&quot;
&quot;http://jakarta.apache.org/struts/dtds/struts-config_1_0.dtd&quot;&gt;

&lt;struts-config&gt;

   &lt;!-- ========== Form Bean Definitions ============ --&gt;
   &lt;form-beans&gt;
      &lt;form-bean name=&quot;login&quot; type=&quot;test.struts.LoginForm&quot; /&gt;
   &lt;/form-beans&gt;

   &lt;!-- ========== Global Forward Definitions ========= --&gt;
   &lt;global-forwards&gt;
   &lt;/global-forwards&gt;

   &lt;!-- ========== Action Mapping Definitions ======== --&gt;
   &lt;action-mappings&gt;
      &lt;action
         path=&quot;/login&quot;
         type=&quot;test.struts.LoginAction&quot; &gt;

         &lt;forward name=&quot;valid&quot; path=&quot;/jsp/MainMenu.jsp&quot; /&gt;
         &lt;forward name=&quot;invalid&quot; path=&quot;/jsp/LoginView.jsp&quot; /&gt;
      &lt;/action&gt;
   &lt;/action-mappings&gt;

   &lt;!-- ========== Controller Definitions ======== --&gt;
   &lt;controller 
      contentType=&quot;text/html;charset=UTF-8&quot;
      debug=&quot;3&quot;
      maxFileSize=&quot;1.618M&quot;
      locale=&quot;true&quot;
      nocache=&quot;true&quot;/&gt;

&lt;/struts-config&gt;
</code></pre><p>有关struts-config.xml文件的更多详细内容，可查看Struts Documentation。</p><h2 id="struts-properties文件"><a href="#struts-properties文件" class="headerlink" title="struts.properties文件"></a>struts.properties文件</h2><p>这个配置文件提供了一种机制来改变框架的默认行为。实际上，<strong>struts.properties</strong>配置文件中包含的所有属性也可以在<strong>web.xml</strong>中配置使用<strong>init-param</strong>，以及在<strong>struts.xml</strong>配置文件中使用<strong>constant</strong>标签。 但如果你想保持事件独立以及保留更多struts细节，那么你可以在<strong>WEB-INF/classes</strong>文件夹下创建这个文件。</p><p>struts.properties文件中配置的值将覆盖<strong>default.properties</strong>中配置的默认值，这些值包含在struts2-core-x.y.z.jar分布中。有一些属性，你可以考虑改为使用<strong>struts.properties</strong>文件：</p><pre><code>### When set to true, Struts will act much more friendly for developers
struts.devMode = true

### Enables reloading of internationalization files
struts.i18n.reload = true

### Enables reloading of XML configuration files
struts.configuration.xml.reload = true

### Sets the port that the server is run on
struts.url.http.port = 8080
</code></pre><p>这里任何以＃（hash）开头的行都将被假定为注释，并且它会被Struts 2默认忽略。</p></div><div style="width:300px;height:250px;float:left"><ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-9477174171188196" data-ad-slot="4142158067"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div style="width:300px;height:250px;float:left"><ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-9477174171188196" data-ad-slot="5618891265"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2017/spring的transactional注解详细用法.html" rel="next" title="spring的@Transactional注解详细用法"><i class="fa fa-chevron-left"></i> spring的@Transactional注解详细用法</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2017/springmvc的数据转换及数据格式化.html" rel="prev" title="Spring MVC的数据转换及数据格式化">Spring MVC的数据转换及数据格式化 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">Table of Contents</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">Overview</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">Hello</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">1358</span> <span class="site-state-item-name">posts</span></a></div></nav></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#web-xml文件"><span class="nav-number">1.</span> <span class="nav-text">web.xml文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#struts-xml文件"><span class="nav-number">2.</span> <span class="nav-text">struts.xml文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#struts-config-xml文件"><span class="nav-number">3.</span> <span class="nav-text">struts-config.xml文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#struts-properties文件"><span class="nav-number">4.</span> <span class="nav-text">struts.properties文件</span></a></li></ol></div></div></section></div></aside><div class="sfix"><div class="fixedme"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9477174171188196" data-ad-slot="9597600460" data-ad-format="auto"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></div></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2018</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Hello</span></div><div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div><span class="post-meta-divider">|</span><div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script></body></html><!-- rebuild by neat -->