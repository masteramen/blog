<!-- build time:Sat Oct 27 2018 21:00:22 GMT+0800 (CST) --><!DOCTYPE html><html class="theme-next muse use-motion"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4"><link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222"><meta name="description" content="一、MADlib简介MADlib是Pivotal公司与伯克利大学合作的一个开源机器学习库，提供了精确的数据并行实现、统计和机器学习方法对结构化和非结构化数据进行分析，主要目的是扩展数据库的分析能力，可以非常方便的加载到数据库中, 扩展数据库的分析功能，2015年7月MADlib成为Apache软件基金会的孵化项目，其最新版本为MADlib1.11，可以用在Greenplum、PostgreSQL和"><meta name="keywords" content="JAVA,面试"><meta property="og:type" content="article"><meta property="og:title" content="用SQL玩转数据挖掘之MADlib（一）——安装"><meta property="og:url" content="http://www.jfox.info/2017/用sql玩转数据挖掘之madlib-一-安装.html"><meta property="og:site_name" content="java面试"><meta property="og:description" content="一、MADlib简介MADlib是Pivotal公司与伯克利大学合作的一个开源机器学习库，提供了精确的数据并行实现、统计和机器学习方法对结构化和非结构化数据进行分析，主要目的是扩展数据库的分析能力，可以非常方便的加载到数据库中, 扩展数据库的分析功能，2015年7月MADlib成为Apache软件基金会的孵化项目，其最新版本为MADlib1.11，可以用在Greenplum、PostgreSQL和"><meta property="og:locale" content="zh_CN"><meta property="og:updated_time" content="2018-10-27T12:29:37.415Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="用SQL玩转数据挖掘之MADlib（一）——安装"><meta name="twitter:description" content="一、MADlib简介MADlib是Pivotal公司与伯克利大学合作的一个开源机器学习库，提供了精确的数据并行实现、统计和机器学习方法对结构化和非结构化数据进行分析，主要目的是扩展数据库的分析能力，可以非常方便的加载到数据库中, 扩展数据库的分析功能，2015年7月MADlib成为Apache软件基金会的孵化项目，其最新版本为MADlib1.11，可以用在Greenplum、PostgreSQL和"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Muse",version:"5.1.4",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"Author"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://www.jfox.info/2017/用sql玩转数据挖掘之madlib-一-安装.html"><title>用SQL玩转数据挖掘之MADlib（一）——安装 | java面试</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh_CN"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">java面试</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle"></p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>Archives</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://www.jfox.info/2017/用sql玩转数据挖掘之madlib-一-安装.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Hello"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="java面试"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">用SQL玩转数据挖掘之MADlib（一）——安装</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-01T23:51:56+08:00">2017-01-01</time></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="一、MADlib简介"><a href="#一、MADlib简介" class="headerlink" title="一、MADlib简介"></a>一、MADlib简介</h1><p>MADlib是Pivotal公司与伯克利大学合作的一个开源机器学习库，提供了精确的数据并行实现、统计和机器学习方法对结构化和非结构化数据进行分析，主要目的是扩展数据库的分析能力，可以非常方便的加载到数据库中, 扩展数据库的分析功能，2015年7月MADlib成为Apache软件基金会的孵化项目，其最新版本为MADlib1.11，可以用在Greenplum、PostgreSQL和HAWQ等数据库系统中。官网地址：<a href="http://madlib.incubator.apache.org/。" target="_blank" rel="noopener">http://madlib.incubator.apache.org/。</a></p><h2 id="1-设计思想"><a href="#1-设计思想" class="headerlink" title="1. 设计思想"></a>1. 设计思想</h2><p>驱动MADlib架构的主要思想与Hadoop是一致的，主要体现在以下方面：</p><ul><li>操作数据库内的本地数据，不在多个运行时环境中进行不必要的数据移动。</li><li>充分利用数据库发动机的功能，但将机器学习逻辑从特定数据库的实现细节中分离出来。</li><li>利用MPP无共享技术提供的并行性和可扩展性，如Greenplum数据库和HAWQ。</li><li><p>执行的维护活动对Apache社区和正在进行的学术研究开放。</p><p>如果只用一句话总结MADlib的特点，就如标题所述，可以用SQL玩转数据分析、数据挖掘和机器学习。</p></li></ul><h2 id="2-特性"><a href="#2-特性" class="headerlink" title="2. 特性"></a>2. 特性</h2><p>（1）分类</p><p>如果所需的输出实质上是分类的，可以使用分类方法创建模型，预测新数据会属于哪一类。分类的目标是能够将输入记录标记为正确的类别。</p><p>分类的例子：假设有描述人口统计的数据，以及个人申请贷款和贷款违约历史数据，那么我们就能创建一个模型，描述新的人口统计数据集合贷款违约的可能性。此场景下输出的分类为“违约”和“正常”两类。</p><p>（2）回归</p><p>如果所需的输出具有连续性，我们使用回归方法创建模型，预测输出值。</p><p>回归的例子：如果有真实的描述房地产属性的数据，我们就可以创建一个模型，预测基于住屋已知特征的售价。因为输出反应了连续的数值而不是分类，所以该场景是一个回归问题。</p><p>（3）聚类</p><p>识别数据分组，一组中的数据项比其它组的数据项更相似。</p><p>聚类的例子：在客户细分分析中，目标是识别客户行为相似特征组，以便针对不同特征的客户设计各种营销活动，以达到市场目的。如果提前了解客户细分情况，这将是一个受控的分类任务。当我们让数据识别自身分组时，这就是一个聚类任务。</p><p>（4）主题建模</p><p>主题建模与聚类相似，也是确定彼此相似的数据组。但这里的相似通常特指在文本领域中，具有相同主题的文档。</p><p>（5）关联规则挖掘</p><p>又叫做购物篮分析或频繁项集挖掘。相对于随机发生，确定哪些事项更经常一起发生，指出事项之间的潜在关系。</p><p>关联规则挖掘的例子：在一个网店应用中，关联规则挖掘可用于确定哪些商品倾向于被一起售出。然后将这些商品输入到客户推荐发动机中，提供促销机会，如著名的啤酒与尿布的故事。</p><p>（6）描述性统计</p><p>描述性统计不提供模型，因此不被认为是一种机器学习方法。但描述性统计有助于向分析人员提供信息以了解基础数据，为数据提供有价值的解释，可能影响数据模型的选择。</p><p>描述性统计的例子：计算数据集中每个变量内的数据分布，可以帮助分析式理解哪些变量应被视为分类变量，哪些变量是连续性变量，以及值的分布情况。</p><p>（7）模型验证</p><p>如果不了解一个模型的准确性就开始使用它，会导致糟糕的结果。正因如此，理解模型存在的问题，并用测试数据评估模型的精度显得尤为重要。需要将训练数据和测试数据分离，频繁进行数据分析，验证统计模型的有效性，评估模型不过分拟合训练数据。N-fold交叉验证也经常被使用。</p><h2 id="3-功能"><a href="#3-功能" class="headerlink" title="3. 功能"></a>3. 功能</h2><p>MADlib的功能特色如图1所示。</p><p>图1</p><p>• Data Types and Transformations（数据类型转换）</p><p> Arrays and Matrices（数组与矩阵）</p><p>o Array Operations（数组运算）</p><p>o Matrix Operations（矩阵运算）</p><p>o Matrix Factorization（低矩阵分解）</p><p>o Low-rank Matrix Factorization（低阶矩阵分解）</p><p>o Singular Value Decomposition（SVD，奇异值分解）</p><p>o Norms and Distance functions（规范和距离函数）</p><p>o Sparse Vectors（稀疏矢量）</p><p> Dimensionality Reduction（降维）</p><p>o Principal Component Analysis（PCA主成分分析）</p><p>o Principal Component Projection（PCP主成分投影）</p><p> Encoding Categorical Variables（编码分类变量）</p><p> Stemming（切词）</p><p>• Model Evaluation（模型评估）</p><p> Cross Validation（交叉验证）</p><p>• Statistics（统计）</p><p> Descriptive Statistics（描述性统计）</p><p>o Pearson’s Correlation（皮尔斯相关性）</p><p>o Summary（摘要汇总）</p><p> Inferential Statistics（推断性统计）</p><p>o Hypothesis Tests（假设检验）</p><p> Probability Functions（概率函数）</p><p>• Supervised Learning（监督学习算法）</p><p> Conditional Random Field（条件随机场）</p><p> Regression Models（回归模型）</p><p>o Clustered Variance（聚类方差）</p><p>o Cox-Proportional Hazards Regression（Cox比率风险回归模型）</p><p>o Elastic Net Regularization（Elastic Net 回归）</p><p>o Generalized Linear Models</p><p>o Linear Regression（线性回归）</p><p>o Logistic Regression（逻辑回归）</p><p>o Marginal Effects（边际效应）</p><p>o Multinomial Regression（多项式回归）</p><p>o Ordinal Regression（有序回归）</p><p>o Robust Variance（鲁棒方差）</p><p> Support Vector Machines（SVM，支持矢量机）</p><p> Tree Methods（树模型）</p><p>o Decision Tree（决策树）</p><p>o Random Forest（随机森林）</p><p>• Time Series Analysis（时间序列分析）</p><p> ARIMA（自回归积分滑动平均模型）</p><p>• Unsupervised Learning（无监督学习）</p><p> Association Rules（关联规则）</p><p>o Apriori Algorithm（Apriori算法）</p><p> Clustering（聚类）</p><p>o k-Means Clustering（k-Means）</p><p> Topic Modelling（主题模型）</p><p>o Latent Dirichlet Allocation（LDA）</p><p>• Utility Functions（效用函数）</p><p> Developer Database Functions（开发者数据库函数）</p><p> Linear Solvers（线性求解器）</p><p>o Dense Linear Systems（稠密线性系统）</p><p>o Sparse Linear Systems（稀疏线性系统）</p><p> Path Functions（路径函数）</p><p> PMML Export（PMML输出）</p><p> Text Analysis（文本分析）</p><p>o Term Frequency（词频，TF）</p><h1 id="二、安装"><a href="#二、安装" class="headerlink" title="二、安装"></a>二、安装</h1><h2 id="1-确定安装平台"><a href="#1-确定安装平台" class="headerlink" title="1. 确定安装平台"></a>1. 确定安装平台</h2><p>MADlib最新发布版本是1.11，可以安装在PostgreSQL、Greenplum和HAWQ中，在不同的数据库中安装过程也不尽相同。我是安装在HAWQ2.1.1.0中。</p><h2 id="2-下载MADlib二进制安装压缩包"><a href="#2-下载MADlib二进制安装压缩包" class="headerlink" title="2. 下载MADlib二进制安装压缩包"></a>2. 下载MADlib二进制安装压缩包</h2><p>下载地址为：<br><a href="https://www.jfox.info/go.php?url=https://network.pivotal.io/products/pivotal-hdb">https://network.pivotal.io/products/pivotal-hdb</a><br>。2.1.1.0版本的HAWQ提供了四个安装文件，如图2所示。经过测试，只有MADlib 1.10.0版本的文件可以正常安装。</p><p>图2</p><h2 id="3-安装MADlib"><a href="#3-安装MADlib" class="headerlink" title="3. 安装MADlib"></a>3. 安装MADlib</h2><p>以下命令需要使用gpadmin用户，在HAWQ的master主机上执行。</p><p>（1）解压缩</p><pre><code>tar -zxvf madlib-ossv1.10.0_pv1.9.7_hawq2.1-rhel5-x86_64.tar.gz
</code></pre><p>（2）安装MADlib的gppkg文件</p><pre><code>gppkg -i madlib-ossv1.10.0_pv1.9.7_hawq2.1-rhel5-x86_64.gppkg
</code></pre><p>该命令在HAWQ集群的所有节点（master和segment）上创建MADlib的安装目录和文件，缺省目录为/usr/local/hawq_2_1_1_0/madlib。</p><p>（3）在指定数据库中部署MADlib</p><pre><code>$GPHOME/madlib/bin/madpack install -c /dm -s madlib -p hawq
</code></pre><p>该命令在HAWQ的dm数据库中创建madlib schema，-p参数指定平台为HAWQ。命令执行后可以查看在madlib schema中创建的数据库对象。</p><pre><code>dm=# set search_path=madlib;
SET
dm=# dt
                     List of relations
 Schema |       Name       | Type  |  Owner  |   Storage   
--------+------------------+-------+---------+-------------
 madlib | migrationhistory | table | gpadmin | append only
(1 row)

dm=# ds
                        List of relations
 Schema |          Name           |   Type   |  Owner  | Storage 
--------+-------------------------+----------+---------+---------
 madlib | migrationhistory_id_seq | sequence | gpadmin | heap
(1 row)

dm=# select type,count(*) 
dm-#   from (select p.proname as name,
dm(#                case when p.proisagg then &apos;agg&apos;
dm(#                     when p.prorettype = &apos;pg_catalog.trigger&apos;::pg_catalog.regtype then &apos;trigger&apos;
dm(#                     else &apos;normal&apos;
dm(#                 end as type
dm(#            from pg_catalog.pg_proc p, pg_catalog.pg_namespace n 
dm(#           where n.oid = p.pronamespace and n.nspname=&apos;madlib&apos;) t 
dm-#  group by rollup (type);
  type  | count 
--------+-------
 agg    |   135
 normal |  1324
        |  1459
(3 rows)
</code></pre><p>可以看到，MADlib部署应用程序madpack首先创建数据库模式madlib，然后在该模式中创建数据库对象，包括 一个表，一个序列，1324个普通函数，135个聚合函数。所有的机器学习和数据挖掘模型、算法、操作和功能都是通过调用这些函数实际执行的。</p><p>（4）验证安装</p><pre><code>$GPHOME/madlib/bin/madpack install-check -c /dm -s madlib -p hawq
</code></pre><p>该命令通过执行29个模型的77个案例，验证所有模型都能正常工作。命令输出如下：</p><pre><code>[gpadmin@hdp3 Madlib]$ $GPHOME/madlib/bin/madpack install-check -c /dm -s madlib -p hawq
madpack.py : INFO : Detected HAWQ version 2.1.
TEST CASE RESULT|Module: array_ops|array_ops.sql_in|PASS|Time: 1851 milliseconds
TEST CASE RESULT|Module: bayes|gaussian_naive_bayes.sql_in|PASS|Time: 24222 milliseconds
TEST CASE RESULT|Module: bayes|bayes.sql_in|PASS|Time: 70634 milliseconds
TEST CASE RESULT|Module: crf|crf_train_small.sql_in|PASS|Time: 27186 milliseconds
TEST CASE RESULT|Module: crf|crf_train_large.sql_in|PASS|Time: 32602 milliseconds
TEST CASE RESULT|Module: crf|crf_test_small.sql_in|PASS|Time: 22410 milliseconds
TEST CASE RESULT|Module: crf|crf_test_large.sql_in|PASS|Time: 21711 milliseconds
TEST CASE RESULT|Module: elastic_net|elastic_net_install_check.sql_in|PASS|Time: 931563 milliseconds
TEST CASE RESULT|Module: graph|sssp.sql_in|PASS|Time: 18174 milliseconds
TEST CASE RESULT|Module: linalg|svd.sql_in|PASS|Time: 72105 milliseconds
TEST CASE RESULT|Module: linalg|matrix_ops.sql_in|PASS|Time: 58312 milliseconds
TEST CASE RESULT|Module: linalg|linalg.sql_in|PASS|Time: 2836 milliseconds
TEST CASE RESULT|Module: pmml|table_to_pmml.sql_in|PASS|Time: 34508 milliseconds
TEST CASE RESULT|Module: pmml|pmml_rf.sql_in|PASS|Time: 35993 milliseconds
TEST CASE RESULT|Module: pmml|pmml_ordinal.sql_in|PASS|Time: 15540 milliseconds
TEST CASE RESULT|Module: pmml|pmml_multinom.sql_in|PASS|Time: 12546 milliseconds
TEST CASE RESULT|Module: pmml|pmml_glm_poisson.sql_in|PASS|Time: 7321 milliseconds
TEST CASE RESULT|Module: pmml|pmml_glm_normal.sql_in|PASS|Time: 8597 milliseconds
TEST CASE RESULT|Module: pmml|pmml_glm_ig.sql_in|PASS|Time: 8861 milliseconds
TEST CASE RESULT|Module: pmml|pmml_glm_gamma.sql_in|PASS|Time: 26212 milliseconds
TEST CASE RESULT|Module: pmml|pmml_glm_binomial.sql_in|PASS|Time: 12977 milliseconds
TEST CASE RESULT|Module: pmml|pmml_dt.sql_in|PASS|Time: 9401 milliseconds
TEST CASE RESULT|Module: prob|prob.sql_in|PASS|Time: 1917 milliseconds
TEST CASE RESULT|Module: sketch|support.sql_in|PASS|Time: 143 milliseconds
TEST CASE RESULT|Module: sketch|mfv.sql_in|PASS|Time: 720 milliseconds
TEST CASE RESULT|Module: sketch|fm.sql_in|PASS|Time: 7301 milliseconds
TEST CASE RESULT|Module: sketch|cm.sql_in|PASS|Time: 19777 milliseconds
TEST CASE RESULT|Module: svm|svm.sql_in|PASS|Time: 205677 milliseconds
TEST CASE RESULT|Module: tsa|arima_train.sql_in|PASS|Time: 75680 milliseconds
TEST CASE RESULT|Module: tsa|arima.sql_in|PASS|Time: 76236 milliseconds
TEST CASE RESULT|Module: conjugate_gradient|conj_grad.sql_in|PASS|Time: 6757 milliseconds
TEST CASE RESULT|Module: knn|knn.sql_in|PASS|Time: 9835 milliseconds
TEST CASE RESULT|Module: lda|lda.sql_in|PASS|Time: 20510 milliseconds
TEST CASE RESULT|Module: stats|wsr_test.sql_in|PASS|Time: 2766 milliseconds
TEST CASE RESULT|Module: stats|t_test.sql_in|PASS|Time: 3686 milliseconds
TEST CASE RESULT|Module: stats|robust_and_clustered_variance_coxph.sql_in|PASS|Time: 17499 milliseconds
TEST CASE RESULT|Module: stats|pred_metrics.sql_in|PASS|Time: 14032 milliseconds
TEST CASE RESULT|Module: stats|mw_test.sql_in|PASS|Time: 1852 milliseconds
TEST CASE RESULT|Module: stats|ks_test.sql_in|PASS|Time: 2465 milliseconds
TEST CASE RESULT|Module: stats|f_test.sql_in|PASS|Time: 2358 milliseconds
TEST CASE RESULT|Module: stats|cox_prop_hazards.sql_in|PASS|Time: 39932 milliseconds
TEST CASE RESULT|Module: stats|correlation.sql_in|PASS|Time: 10520 milliseconds
TEST CASE RESULT|Module: stats|chi2_test.sql_in|PASS|Time: 3581 milliseconds
TEST CASE RESULT|Module: stats|anova_test.sql_in|PASS|Time: 1801 milliseconds
TEST CASE RESULT|Module: svec_util|svec_test.sql_in|PASS|Time: 14043 milliseconds
TEST CASE RESULT|Module: svec_util|gp_sfv_sort_order.sql_in|PASS|Time: 3399 milliseconds
TEST CASE RESULT|Module: utilities|text_utilities.sql_in|PASS|Time: 6579 milliseconds
TEST CASE RESULT|Module: utilities|sessionize.sql_in|PASS|Time: 3901 milliseconds
TEST CASE RESULT|Module: utilities|pivot.sql_in|PASS|Time: 15634 milliseconds
TEST CASE RESULT|Module: utilities|path.sql_in|PASS|Time: 9321 milliseconds
TEST CASE RESULT|Module: utilities|encode_categorical.sql_in|PASS|Time: 7665 milliseconds
TEST CASE RESULT|Module: utilities|drop_madlib_temp.sql_in|PASS|Time: 153 milliseconds
TEST CASE RESULT|Module: assoc_rules|assoc_rules.sql_in|PASS|Time: 31975 milliseconds
TEST CASE RESULT|Module: convex|lmf.sql_in|PASS|Time: 66775 milliseconds
TEST CASE RESULT|Module: glm|poisson.sql_in|PASS|Time: 19117 milliseconds
TEST CASE RESULT|Module: glm|ordinal.sql_in|PASS|Time: 23446 milliseconds
TEST CASE RESULT|Module: glm|multinom.sql_in|PASS|Time: 18780 milliseconds
TEST CASE RESULT|Module: glm|inverse_gaussian.sql_in|PASS|Time: 20931 milliseconds
TEST CASE RESULT|Module: glm|gaussian.sql_in|PASS|Time: 23795 milliseconds
TEST CASE RESULT|Module: glm|gamma.sql_in|PASS|Time: 43365 milliseconds
TEST CASE RESULT|Module: glm|binomial.sql_in|PASS|Time: 39437 milliseconds
TEST CASE RESULT|Module: linear_systems|sparse_linear_sytems.sql_in|PASS|Time: 5405 milliseconds
TEST CASE RESULT|Module: linear_systems|dense_linear_sytems.sql_in|PASS|Time: 3331 milliseconds
TEST CASE RESULT|Module: recursive_partitioning|random_forest.sql_in|PASS|Time: 294832 milliseconds
TEST CASE RESULT|Module: recursive_partitioning|decision_tree.sql_in|PASS|Time: 91311 milliseconds
TEST CASE RESULT|Module: regress|robust.sql_in|PASS|Time: 55325 milliseconds
TEST CASE RESULT|Module: regress|multilogistic.sql_in|PASS|Time: 25330 milliseconds
TEST CASE RESULT|Module: regress|marginal.sql_in|PASS|Time: 73750 milliseconds
TEST CASE RESULT|Module: regress|logistic.sql_in|PASS|Time: 76501 milliseconds
TEST CASE RESULT|Module: regress|linear.sql_in|PASS|Time: 7517 milliseconds
TEST CASE RESULT|Module: regress|clustered.sql_in|PASS|Time: 40661 milliseconds
TEST CASE RESULT|Module: sample|sample.sql_in|PASS|Time: 890 milliseconds
TEST CASE RESULT|Module: summary|summary.sql_in|PASS|Time: 14644 milliseconds
TEST CASE RESULT|Module: kmeans|kmeans.sql_in|PASS|Time: 52173 milliseconds
TEST CASE RESULT|Module: pca|pca_project.sql_in|PASS|Time: 229016 milliseconds
TEST CASE RESULT|Module: pca|pca.sql_in|PASS|Time: 523230 milliseconds
TEST CASE RESULT|Module: validation|cross_validation.sql_in|PASS|Time: 33685 milliseconds
[gpadmin@hdp3 Madlib]$
</code></pre><p>可以看到，所有案例都已经正常执行，说明MADlib安装成功。</p><h1 id="三、卸载"><a href="#三、卸载" class="headerlink" title="三、卸载"></a>三、卸载</h1><p>卸载过程基本上是安装的逆过程。</p><h2 id="1-删除madlib模式"><a href="#1-删除madlib模式" class="headerlink" title="1. 删除madlib模式"></a>1. 删除madlib模式</h2><p>方法1，使用madpack部署应用程序。</p><pre><code>$GPHOME/madlib/bin/madpack uninstall -c /dm -s madlib -p hawq
</code></pre><p>方法2，使用SQL命令手工删除模式。</p><pre><code>drop schema madlib cascade;
</code></pre><h2 id="2-删除其它遗留数据库对象"><a href="#2-删除其它遗留数据库对象" class="headerlink" title="2. 删除其它遗留数据库对象"></a>2. 删除其它遗留数据库对象</h2><p>（1）删除模式</p><p>如果测试中途出错，数据库中可能包含测试的模式，这些模式名称的前缀都是madlib_installcheck_，只能手工执行SQL命令删除这些模式，如：</p><pre><code>drop schema madlib_installcheck_kmeans cascade;
</code></pre><p>（2）删除用户</p><p>如果存在遗留的测试用户，则删除它。</p><pre><code>drop user if exists madlib_1100_installcheck;
</code></pre><h2 id="3-删除MADlib-rpm包"><a href="#3-删除MADlib-rpm包" class="headerlink" title="3. 删除MADlib rpm包"></a>3. 删除MADlib rpm包</h2><p>（1）查询包名</p><pre><code>gppkg -q --all
</code></pre><p>输出如下：</p><pre><code>[gpadmin@hdp3 Madlib]$ gppkg -q --all
20170630:16:19:53:076493 gppkg:hdp3:gpadmin-[INFO]:-Starting gppkg with args: -q --all
madlib-ossv1.10.0_pv1.9.7_hawq2.1
</code></pre><p>（2）删除rpm包</p><pre><code>gppkg -r madlib-ossv1.10.0_pv1.9.7_hawq2.1
</code></pre></div><div style="width:300px;height:250px;float:left"><ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-9477174171188196" data-ad-slot="4142158067"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div style="width:300px;height:250px;float:left"><ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-9477174171188196" data-ad-slot="5618891265"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2017/曾将公司送上新三板的创始人-为何重回bat工作.html" rel="next" title="曾将公司送上新三板的创始人，为何重回BAT工作？"><i class="fa fa-chevron-left"></i> 曾将公司送上新三板的创始人，为何重回BAT工作？</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2017/笔记-jersey-rest-api-设计.html" rel="prev" title="笔记：Jersey REST API 设计">笔记：Jersey REST API 设计 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">Table of Contents</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">Overview</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">Hello</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">1358</span> <span class="site-state-item-name">posts</span></a></div></nav></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#一、MADlib简介"><span class="nav-number">1.</span> <span class="nav-text">一、MADlib简介</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-设计思想"><span class="nav-number">1.1.</span> <span class="nav-text">1. 设计思想</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-特性"><span class="nav-number">1.2.</span> <span class="nav-text">2. 特性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-功能"><span class="nav-number">1.3.</span> <span class="nav-text">3. 功能</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二、安装"><span class="nav-number">2.</span> <span class="nav-text">二、安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-确定安装平台"><span class="nav-number">2.1.</span> <span class="nav-text">1. 确定安装平台</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-下载MADlib二进制安装压缩包"><span class="nav-number">2.2.</span> <span class="nav-text">2. 下载MADlib二进制安装压缩包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-安装MADlib"><span class="nav-number">2.3.</span> <span class="nav-text">3. 安装MADlib</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#三、卸载"><span class="nav-number">3.</span> <span class="nav-text">三、卸载</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-删除madlib模式"><span class="nav-number">3.1.</span> <span class="nav-text">1. 删除madlib模式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-删除其它遗留数据库对象"><span class="nav-number">3.2.</span> <span class="nav-text">2. 删除其它遗留数据库对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-删除MADlib-rpm包"><span class="nav-number">3.3.</span> <span class="nav-text">3. 删除MADlib rpm包</span></a></li></ol></li></ol></div></div></section></div></aside><div class="sfix"><div class="fixedme"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9477174171188196" data-ad-slot="9597600460" data-ad-format="auto"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></div></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2018</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Hello</span></div><div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div><span class="post-meta-divider">|</span><div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script></body></html><!-- rebuild by neat -->