<!-- build time:Sat Oct 27 2018 21:00:19 GMT+0800 (CST) --><!DOCTYPE html><html class="theme-next muse use-motion"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4"><link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222"><meta name="description" content="1 什么是springJDBCspring通过抽象JDBC访问并一致的API来简化JDBC编程的工作量。我们只需要声明SQL、调用合适的SpringJDBC框架API、处理结果集即可。事务由Spring管理，并将JDBC受查异常转换为Spring一致的非受查异常，从而简化开发。利用传统的jdbc操作数据库的步骤：获取连接→创建Statement→执行数据操作→获取结果→关闭Statement→关闭"><meta name="keywords" content="JAVA,面试"><meta property="og:type" content="article"><meta property="og:title" content="springJDBC01 利用springJDBC操作数据库"><meta property="og:url" content="http://www.jfox.info/2017/springjdbc01利用springjdbc操作数据库.html"><meta property="og:site_name" content="java面试"><meta property="og:description" content="1 什么是springJDBCspring通过抽象JDBC访问并一致的API来简化JDBC编程的工作量。我们只需要声明SQL、调用合适的SpringJDBC框架API、处理结果集即可。事务由Spring管理，并将JDBC受查异常转换为Spring一致的非受查异常，从而简化开发。利用传统的jdbc操作数据库的步骤：获取连接→创建Statement→执行数据操作→获取结果→关闭Statement→关闭"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://www.jfox.info/2017/1270/4bddbe4.gif"><meta property="og:image" content="http://www.jfox.info/wp-content/uploads/2017/07/15000419481.gif"><meta property="og:image" content="http://www.jfox.info/2017/1270/4bddbe4.gif"><meta property="og:image" content="http://www.jfox.info/wp-content/uploads/2017/07/15000419481.gif"><meta property="og:image" content="http://www.jfox.info/2017/1270/4bddbe4.gif"><meta property="og:image" content="http://www.jfox.info/wp-content/uploads/2017/07/15000419481.gif"><meta property="og:image" content="http://www.jfox.info/2017/1270/4bddbe4.gif"><meta property="og:image" content="http://www.jfox.info/wp-content/uploads/2017/07/15000419481.gif"><meta property="og:image" content="http://www.jfox.info/2017/1270/4bc24e5.png"><meta property="og:image" content="http://www.jfox.info/2017/1270/4bddbe4.gif"><meta property="og:image" content="http://www.jfox.info/wp-content/uploads/2017/07/15000419481.gif"><meta property="og:image" content="http://www.jfox.info/2017/1270/4bddbe4.gif"><meta property="og:image" content="http://www.jfox.info/wp-content/uploads/2017/07/15000419481.gif"><meta property="og:image" content="http://www.jfox.info/2017/1270/4bddbe4.gif"><meta property="og:image" content="http://www.jfox.info/wp-content/uploads/2017/07/15000419481.gif"><meta property="og:image" content="http://www.jfox.info/2017/1270/4bddbe4.gif"><meta property="og:image" content="http://www.jfox.info/wp-content/uploads/2017/07/15000419481.gif"><meta property="og:image" content="http://www.jfox.info/2017/1270/2861fda.png"><meta property="og:image" content="http://www.jfox.info/2017/1270/699293a.png"><meta property="og:image" content="http://www.jfox.info/2017/1270/4bddbe4.gif"><meta property="og:image" content="http://www.jfox.info/wp-content/uploads/2017/07/15000419481.gif"><meta property="og:updated_time" content="2018-10-27T12:29:37.417Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="springJDBC01 利用springJDBC操作数据库"><meta name="twitter:description" content="1 什么是springJDBCspring通过抽象JDBC访问并一致的API来简化JDBC编程的工作量。我们只需要声明SQL、调用合适的SpringJDBC框架API、处理结果集即可。事务由Spring管理，并将JDBC受查异常转换为Spring一致的非受查异常，从而简化开发。利用传统的jdbc操作数据库的步骤：获取连接→创建Statement→执行数据操作→获取结果→关闭Statement→关闭"><meta name="twitter:image" content="http://www.jfox.info/2017/1270/4bddbe4.gif"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Muse",version:"5.1.4",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"Author"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://www.jfox.info/2017/springjdbc01利用springjdbc操作数据库.html"><title>springJDBC01 利用springJDBC操作数据库 | java面试</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh_CN"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">java面试</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle"></p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>Archives</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://www.jfox.info/2017/springjdbc01利用springjdbc操作数据库.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Hello"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="java面试"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">springJDBC01 利用springJDBC操作数据库</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-01T23:56:10+08:00">2017-01-01</time></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="1-什么是springJDBC"><a href="#1-什么是springJDBC" class="headerlink" title="1 什么是springJDBC"></a>1 什么是springJDBC</h2><p>spring通过抽象JDBC访问并一致的API来简化JDBC编程的工作量。我们只需要声明SQL、调用合适的SpringJDBC框架API、处理结果集即可。事务由Spring管理，并将JDBC受查异常转换为Spring一致的非受查异常，从而简化开发。</p><p>利用传统的jdbc操作数据库的步骤：获取连接→创建Statement→执行数据操作→获取结果→关闭Statement→关闭结果集→关闭连接；而Spring JDBC通过一个模板类org.springframework. jdbc.core.JdbcTemplate封装了样板式的代码，用户通过模板类就可以轻松地完成大部分数据访问的操作。</p><h2 id="2-前期准备"><a href="#2-前期准备" class="headerlink" title="2 前期准备"></a>2 前期准备</h2><h3 id="2-1-jar包"><a href="#2-1-jar包" class="headerlink" title="　　2.1 jar包"></a>　　2.1 jar包</h3><p>spring-jdbc : springjdbc的包<br>mysql ： MySQL的驱动包<br>dbcp ：数据库连接池<br>spring-webmvc : springmvc框架包<br>annotation ：@resource需要用到的包，该包在Tomcat中有，如果是web项目而且运行环境是Tomcat的话就不需要导入这个包了<br>junit ： 单元测试包</p><h3 id="2-2-数据库（使用mysql数据库5-4）"><a href="#2-2-数据库（使用mysql数据库5-4）" class="headerlink" title="　　2.2 数据库（使用mysql数据库5.4）"></a>　　2.2 数据库（使用mysql数据库5.4）</h3><p><img src="/2017/1270/4bddbe4.gif" alt=""><img src="/wp-content/uploads/2017/07/15000419481.gif" alt=""><br>1# 创建用户表<br>2CREATE TABLE t_user (<br>3 user_id INT AUTO_INCREMENT PRIMARY KEY,<br>4 user_name VARCHAR (30),<br>5 credits INT,<br>6 password VARCHAR (32),<br>7 last_visit DATETIME,<br>8 last_ip VARCHAR(23)<br>9) ENGINE = InnoDB;<br>1011# 查询t_user表的结构<br>12DESC t_user;<br>1314# 创建用户登录日志表<br>15CREATE TABLE t_login_log (<br>16 login_log_id INT AUTO_INCREMENT PRIMARY KEY,<br>17 user_id INT,<br>18 ip VARCHAR (23),<br>19 login_datetime DATETIME<br>20) ENGINE = InnoDB;<br>2122#查询 t_login_log 表的结构<br>23DESC t_login_log;<br>2425INSERT INTO t_user<br>26(user_name, password)<br>27VALUES<br>28(“wys”, “182838” );<br>2930 SELECT * FROM t_user;</p><p>相关表</p><h2 id="3-环境搭建（使用的是eclipse）"><a href="#3-环境搭建（使用的是eclipse）" class="headerlink" title="3 环境搭建（使用的是eclipse）"></a>3 环境搭建（使用的是eclipse）</h2><h3 id="3-1-利用maven导入相关jar包"><a href="#3-1-利用maven导入相关jar包" class="headerlink" title="　　3.1 利用maven导入相关jar包"></a>　　3.1 利用maven导入相关jar包</h3><p><img src="/2017/1270/4bddbe4.gif" alt=""><img src="/wp-content/uploads/2017/07/15000419481.gif" alt=""><br>1<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">2<modelversion>4.0.0</modelversion>3<groupid>cn.xiangxu</groupid>4<artifactid>baobaotao</artifactid>5<version>0.0.1-SNAPSHOT</version>6<packaging>war</packaging>7<dependencies>8<dependency>9<groupid>org.springframework</groupid>10<artifactid>spring-webmvc</artifactid>11<version>3.2.8.RELEASE</version>12</dependency>13<dependency>14<groupid>mysql</groupid>15<artifactid>mysql-connector-java</artifactid>16<version>5.1.37</version>17</dependency>18<dependency>19<groupid>org.springframework</groupid>20<artifactid>spring-jdbc</artifactid>21<version>3.2.8.RELEASE</version>22</dependency>23<dependency>24<groupid>commons-dbcp</groupid>25<artifactid>commons-dbcp</artifactid>26<version>1.4</version>27</dependency>28<dependency>29<groupid>javax.annotation</groupid>30<artifactid>javax.annotation-api</artifactid>31<version>1.2</version>32</dependency>33<dependency>34<groupid>junit</groupid>35<artifactid>junit</artifactid>36<version>4.12</version>37</dependency>38</dependencies>39</project></p><p>pom.xml</p><h3 id="3-2-创建properties文件，用于存放数据库相关信息"><a href="#3-2-创建properties文件，用于存放数据库相关信息" class="headerlink" title="　　3.2 创建properties文件，用于存放数据库相关信息"></a>　　3.2 创建properties文件，用于存放数据库相关信息</h3><p><img src="/2017/1270/4bddbe4.gif" alt=""><img src="/wp-content/uploads/2017/07/15000419481.gif" alt=""><br>1driverClassName=com.mysql.jdbc.Driver<br>2url=jdbc:mysql://127.0.0.1:3306/sampledb<br>3username=root<br>4password=182838<br>5maxActive=10<br>6 maxWait=3000</p><p>mysql.properties</p><h3 id="3-3-创建spring配置文件"><a href="#3-3-创建spring配置文件" class="headerlink" title="　　3.3 创建spring配置文件"></a>　　3.3 创建spring配置文件</h3><h4 id="3-3-1-配置properties文件的bean"><a href="#3-3-1-配置properties文件的bean" class="headerlink" title="　　　　3.3.1 配置properties文件的bean"></a>　　　　3.3.1 配置properties文件的bean</h4><h4 id="3-3-2-配置数据库连接池"><a href="#3-3-2-配置数据库连接池" class="headerlink" title="　　　　3.3.2 配置数据库连接池"></a>　　　　3.3.2 配置数据库连接池</h4><h4 id="3-3-3-配置jdbcTemplate"><a href="#3-3-3-配置jdbcTemplate" class="headerlink" title="　　　　3.3.3 配置jdbcTemplate"></a>　　　　3.3.3 配置jdbcTemplate</h4><h4 id="3-3-4-配置组件扫描"><a href="#3-3-4-配置组件扫描" class="headerlink" title="　　　　3.3.4 配置组件扫描"></a>　　　　3.3.4 配置组件扫描</h4><p><img src="/2017/1270/4bddbe4.gif" alt=""><img src="/wp-content/uploads/2017/07/15000419481.gif" alt=""><br>1&lt;?xml version=”1.0” encoding=”UTF-8”?&gt; 2<beans 3="" 4="" 5="" 6="" 7="" 8="" xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context" xmlns:jdbc="http://www.springframework.org/schema/jdbc" xmlns:jee="http://www.springframework.org/schema/jee" xmlns:tx="http://www.springframework.org/schema/tx" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:util="http://www.springframework.org/schema/util" xmlns:jpa="http://www.springframework.org/schema/data/jpa" xsi:schemalocation="
     9        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
    10        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
    11        http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.2.xsd
    12        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd
    13        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
    14        http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd
    15        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
    16        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
    17        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd">181920&lt;util:properties id=”mysql” location=”classpath:config/mysql.properties”/&gt;212223<bean id="ds" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">24<property name="driverClassName" value="#{mysql.driverClassName}">25<property name="url" value="#{mysql.url}">26<property name="username" value="#{mysql.username}">27<property name="password" value="#{mysql.password}">28</property></property></property></property></bean>293031<bean id="jt" class="org.springframework.jdbc.core.JdbcTemplate">32<property name="dataSource" ref="ds"></property>33</bean>343536&lt;context:component-scan base-package=”com.baobaotao”&gt;&lt;/context:component-scan&gt;3738</beans></p><p>spring_mysql.xml<br>注意：我们不用配置spirng的主控制器，因为我们只是操作持久层；虽然我们用到了spring容器，但是我们可以通过编写代码来启动容器</p><h3 id="3-4-项目结构图"><a href="#3-4-项目结构图" class="headerlink" title="　　3.4 项目结构图"></a>　　3.4 项目结构图</h3><p><img src="/2017/1270/4bc24e5.png" alt=""></p><h2 id="4-代码实现数据库操作"><a href="#4-代码实现数据库操作" class="headerlink" title="4 代码实现数据库操作"></a>4 代码实现数据库操作</h2><h3 id="4-1-编写实体类"><a href="#4-1-编写实体类" class="headerlink" title="　　4.1 编写实体类"></a>　　4.1 编写实体类</h3><p><img src="/2017/1270/4bddbe4.gif" alt=""><img src="/wp-content/uploads/2017/07/15000419481.gif" alt=""><br>1package com.baobaotao.entity;<br>2 3import java.io.Serializable;<br>4import java.util.Date;<br>5 6publicclass User implements Serializable {<br>7 8privatestaticfinallong serialVersionUID = -3573627859368072117L;<br>910private Integer userId;<br>11private String userName;<br>12private Integer credits;<br>13private String password;<br>14private Date lastVisit;<br>15private String lastIp;<br>1617public User() {<br>18super();<br>19// TODO Auto-generated constructor stub20 }<br>2122public User(Integer userId, String userName, Integer credits, String password, Date lastVisit, String lastIp) {<br>23super();<br>24this.userId = userId;<br>25this.userName = userName;<br>26this.credits = credits;<br>27this.password = password;<br>28this.lastVisit = lastVisit;<br>29this.lastIp = lastIp;<br>30 }<br>3132 @Override<br>33publicint hashCode() {<br>34finalint prime = 31;<br>35int result = 1;<br>36 result = prime * result + ((lastIp == null) ? 0 : lastIp.hashCode());<br>37return result;<br>38 }<br>39 @Override<br>40publicboolean equals(Object obj) {<br>41if (this == obj)<br>42returntrue;<br>43if (obj == null)<br>44returnfalse;<br>45if (getClass() != obj.getClass())<br>46returnfalse;<br>47 User other = (User) obj;<br>48if (lastIp == null) {<br>49if (other.lastIp != null)<br>50returnfalse;<br>51 } elseif (!lastIp.equals(other.lastIp))<br>52returnfalse;<br>53returntrue;<br>54 }<br>55public Integer getUserId() {<br>56return userId;<br>57 }<br>58publicvoid setUserId(Integer userId) {<br>59this.userId = userId;<br>60 }<br>61public String getUserName() {<br>62return userName;<br>63 }<br>64publicvoid setUserName(String userName) {<br>65this.userName = userName;<br>66 }<br>67public Integer getCredits() {<br>68return credits;<br>69 }<br>70publicvoid setCredits(Integer credits) {<br>71this.credits = credits;<br>72 }<br>73public String getPassword() {<br>74return password;<br>75 }<br>76publicvoid setPassword(String password) {<br>77this.password = password;<br>78 }<br>79public Date getLastVisit() {<br>80return lastVisit;<br>81 }<br>82publicvoid setLastVisit(Date lastVisit) {<br>83this.lastVisit = lastVisit;<br>84 }<br>85public String getLastIp() {<br>86return lastIp;<br>87 }<br>88publicvoid setLastIp(String lastIp) {<br>89this.lastIp = lastIp;<br>90 }<br>9192 @Override<br>93public String toString() {<br>94return “User [userId=” + userId + “, userName=” + userName + “, credits=” + credits + “, password=” + password<br>95 + “, lastVisit=” + lastVisit + “, lastIp=” + lastIp + “]”;<br>96 }<br>9798 }</p><p>User.java<img src="/2017/1270/4bddbe4.gif" alt=""><img src="/wp-content/uploads/2017/07/15000419481.gif" alt=""><br>1package com.baobaotao.entity;<br>2 3import java.io.Serializable;<br>4import java.util.Date;<br>5 6publicclass LoginLog implements Serializable {<br>7 8privatestaticfinallong serialVersionUID = 5176708814959439551L;<br>910private Integer loginLogId;<br>11private String userId;<br>12private String ip;<br>13private Date loginDatetime;<br>14 @Override<br>15publicint hashCode() {<br>16finalint prime = 31;<br>17int result = 1;<br>18 result = prime <em>result + ((ip == null) ? 0 : ip.hashCode());<br>19 result = prime </em>result + ((loginDatetime == null) ? 0 : loginDatetime.hashCode());<br>20 result = prime <em>result + ((loginLogId == null) ? 0 : loginLogId.hashCode());<br>21 result = prime </em>result + ((userId == null) ? 0 : userId.hashCode());<br>22return result;<br>23 }<br>24 @Override<br>25publicboolean equals(Object obj) {<br>26if (this == obj)<br>27returntrue;<br>28if (obj == null)<br>29returnfalse;<br>30if (getClass() != obj.getClass())<br>31returnfalse;<br>32 LoginLog other = (LoginLog) obj;<br>33if (ip == null) {<br>34if (other.ip != null)<br>35returnfalse;<br>36 } elseif (!ip.equals(other.ip))<br>37returnfalse;<br>38if (loginDatetime == null) {<br>39if (other.loginDatetime != null)<br>40returnfalse;<br>41 } elseif (!loginDatetime.equals(other.loginDatetime))<br>42returnfalse;<br>43if (loginLogId == null) {<br>44if (other.loginLogId != null)<br>45returnfalse;<br>46 } elseif (!loginLogId.equals(other.loginLogId))<br>47returnfalse;<br>48if (userId == null) {<br>49if (other.userId != null)<br>50returnfalse;<br>51 } elseif (!userId.equals(other.userId))<br>52returnfalse;<br>53returntrue;<br>54 }<br>55public Integer getLoginLogId() {<br>56return loginLogId;<br>57 }<br>58publicvoid setLoginLogId(Integer loginLogId) {<br>59this.loginLogId = loginLogId;<br>60 }<br>61public String getUserId() {<br>62return userId;<br>63 }<br>64publicvoid setUserId(String userId) {<br>65this.userId = userId;<br>66 }<br>67public String getIp() {<br>68return ip;<br>69 }<br>70publicvoid setIp(String ip) {<br>71this.ip = ip;<br>72 }<br>73public Date getLoginDatetime() {<br>74return loginDatetime;<br>75 }<br>76publicvoid setLoginDatetime(Date loginDatetime) {<br>77this.loginDatetime = loginDatetime;<br>78 }<br>79public LoginLog() {<br>80super();<br>81// TODO Auto-generated constructor stub82 }<br>83public LoginLog(Integer loginLogId, String userId, String ip, Date loginDatetime) {<br>84super();<br>85this.loginLogId = loginLogId;<br>86this.userId = userId;<br>87this.ip = ip;<br>88this.loginDatetime = loginDatetime;<br>89 }<br>90 @Override<br>91public String toString() {<br>92return “LoginLog [loginLogId=” + loginLogId + “, userId=” + userId + “, ip=” + ip + “, loginDatetime=”<br>93 + loginDatetime + “]”;<br>94 }<br>9596 }</p><p>LoginLog.java</p><h3 id="4-2-编写UserDao接口"><a href="#4-2-编写UserDao接口" class="headerlink" title="　　4.2 编写UserDao接口"></a>　　4.2 编写UserDao接口</h3><p><img src="/2017/1270/4bddbe4.gif" alt=""><img src="/wp-content/uploads/2017/07/15000419481.gif" alt=""><br>1package com.baobaotao.dao;<br>2 3import java.util.List;<br>4 5import com.baobaotao.entity.User;<br>6 7publicinterface UserDao {<br>8/<strong> 9 <em>向用户表中添加记录<br>10 </em>@param user 用户表实体对象<br>11*/12publicvoid insert(User user);<br>1314/</strong>15 <em>查询所有用户数据<br>16 </em>@return 由查询到记录组成的集合<br>17*/18public List<user>findAll();<br>1920 }</user></p><p>UserDao.java</p><h3 id="4-3-编写UserDao接口的实现类UserDaoImpl"><a href="#4-3-编写UserDao接口的实现类UserDaoImpl" class="headerlink" title="　　4.3 编写UserDao接口的实现类UserDaoImpl　　"></a>　　4.3 编写UserDao接口的实现类UserDaoImpl</h3><p><img src="/2017/1270/4bddbe4.gif" alt=""><img src="/wp-content/uploads/2017/07/15000419481.gif" alt=""><br>1package com.baobaotao.dao;<br>2 3import java.sql.ResultSet;<br>4import java.sql.SQLException;<br>5import java.util.List;<br>6 7import javax.annotation.Resource;<br>8 9import org.springframework.jdbc.core.JdbcTemplate;<br>10import org.springframework.jdbc.core.RowMapper;<br>11import org.springframework.stereotype.Repository;<br>1213import com.baobaotao.entity.User;<br>1415 @Repository(“userDao”)<br>16publicclass UserDaoImpl implements UserDao {<br>1718 @Resource(name=”jt”)<br>19private JdbcTemplate jt;<br>2021publicvoid insert(User user) {<br>2223 String sql = “INSERT INTO t_user “ +<br>24 “(user_name, password) “ +<br>25 “VALUES “ +<br>26 “(?, ?) “;<br>27 Object [] args = {user.getUserName(), user.getPassword()};<br>28 Integer num = jt.update(sql, args);<br>29if(num &gt; 0) {<br>30 System.out.println(“插入数据成功”);<br>31 } else {<br>32 System.out.println(“插入数据失败”);<br>33 }<br>3435 }<br>3637public List<user>findAll() {<br>38 String sql = “SELECT <em>FROM t_user “;<br>39 List<user>users = jt.query(sql, new UserRowMapper());<br>40return users;<br>41 }<br>4243/**44</user></em>结果集处理：经每一条查询记录转变成一个实体对象<br>45 <em>@author 三少<br>46</em><br>47*/48class UserRowMapper implements RowMapper<user>{<br>4950public User mapRow(ResultSet rs, int rowNum) throws SQLException {<br>51 User user = new User();<br>52 user.setUserId(rs.getInt(“user_id”));<br>53 user.setUserName(rs.getString(“user_name”));<br>54 user.setCredits(rs.getInt(“credits”));<br>55 user.setPassword(rs.getString(“password”));<br>56 user.setLastVisit(rs.getDate(“last_visit”));<br>57 user.setLastIp(rs.getString(“last_ip”));<br>58return user;<br>59 }<br>60 }<br>6162 }</user></user></p><p>UserDaoImpl<br>使用springJDBC操作数据库时，程序员只需要编写相关的sql语句，待定参数可以用？代替，然后调用JdbcTemplate类的相关方法来执行sql语句就行啦。</p><p>JdbcTemplate类中的主要方法</p><p><a href="execute方法：可以用于执行任何SQL语句，一般用于执行DDL语句；">execute方法：可以用于执行任何SQL语句，一般用于执行DDL语句；</a><br><a href="update方法及batchUpdate方法：update方法用于执行新增、修改、删除等语句; 
batchUpdate方法用于执行批处理相关语句；">update方法及batchUpdate方法：update方法用于执行新增、修改、删除等语句;<br>batchUpdate方法用于执行批处理相关语句；</a><br><a href="query方法及queryForXXX方法：用于执行查询相关语句">query方法及queryForXXX方法：用于执行查询相关语句</a><br><a href="call方法：用于执行存储过程、函数相关语句。">call方法：用于执行存储过程、函数相关语句。</a></p><p>注意：</p><p>使用query方法时有三个参数</p><p>参数1　　sql语句字符串</p><p>参数2　　未知参数组</p><p>参数3　　查询结果处理（就是讲每一条查询记录变成一个实体对象，三少的一般做法是编写一个实现了RowMapper接口的内部类，然后创建一个该内部类对象来作为参数3）</p><h3 id="4-4-项目结构图"><a href="#4-4-项目结构图" class="headerlink" title="　　4.4 项目结构图"></a>　　4.4 项目结构图</h3><p><img src="/2017/1270/2861fda.png" alt=""></p><h2 id="5-测试类"><a href="#5-测试类" class="headerlink" title="5 测试类"></a>5 测试类</h2><h3 id="5-1-测试前需要启动spring容器，因为我们的代码中使用到了spring容器的功能"><a href="#5-1-测试前需要启动spring容器，因为我们的代码中使用到了spring容器的功能" class="headerlink" title="　　5.1 测试前需要启动spring容器，因为我们的代码中使用到了spring容器的功能"></a>　　5.1 测试前需要启动spring容器，因为我们的代码中使用到了spring容器的功能</h3><p><img src="/2017/1270/699293a.png" alt=""></p><h3 id="5-2-编写测试方法"><a href="#5-2-编写测试方法" class="headerlink" title="　　5.2 编写测试方法"></a>　　5.2 编写测试方法</h3><p><img src="/2017/1270/4bddbe4.gif" alt=""><img src="/wp-content/uploads/2017/07/15000419481.gif" alt=""><br>1package testDao;<br>2 3import java.util.List;<br>4 5import org.junit.Before;<br>6import org.junit.Test;<br>7import org.springframework.context.ApplicationContext;<br>8import org.springframework.context.support.ClassPathXmlApplicationContext;<br>910import com.baobaotao.dao.UserDao;<br>11import com.baobaotao.entity.User;<br>1213publicclass TestDao {<br>1415private ApplicationContext ac;<br>16private UserDao userDao;<br>1718 @Before<br>19publicvoid init() {<br>20 ac = new ClassPathXmlApplicationContext(“config/spring_mysql.xml”); // 启动容器21 System.out.println(ac);<br>2223 userDao = ac.getBean(“userDao”, UserDao.class); // 利用容器创建对象24 System.out.println(userDao);<br>25 }<br>2627/<strong>28 <em>测试插入数据<br>29</em>/30 @Test<br>31publicvoid test01() {<br>32 User user = new User();<br>33 user.setUserName(“wym”);<br>34 user.setPassword(“111”);<br>3536 userDao.insert(user);<br>37 }<br>3839/</strong>40 <em>测试查询所有数据<br>41</em>/42 @Test<br>43publicvoid test02() {<br>44 List<user>users = userDao.findAll();<br>45for(User user : users) {<br>46 System.out.println(user);<br>47 }<br>48 }<br>495051 }</user></p><p>测试类</p></div><div style="width:300px;height:250px;float:left"><ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-9477174171188196" data-ad-slot="4142158067"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div style="width:300px;height:250px;float:left"><ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-9477174171188196" data-ad-slot="5618891265"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2017/springmvc支持跨域访问spring跨域访问springmvccrossorigin跨域.html" rel="next" title="SpringMvc支持跨域访问，Spring跨域访问，SpringMvc @CrossOrigin 跨域"><i class="fa fa-chevron-left"></i> SpringMvc支持跨域访问，Spring跨域访问，SpringMvc @CrossOrigin 跨域</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2017/构建自己的tomcat镜像.html" rel="prev" title="构建自己的Tomcat镜像">构建自己的Tomcat镜像 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">Table of Contents</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">Overview</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">Hello</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">1358</span> <span class="site-state-item-name">posts</span></a></div></nav></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-什么是springJDBC"><span class="nav-number">1.</span> <span class="nav-text">1 什么是springJDBC</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-前期准备"><span class="nav-number">2.</span> <span class="nav-text">2 前期准备</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-jar包"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 jar包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-数据库（使用mysql数据库5-4）"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 数据库（使用mysql数据库5.4）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-环境搭建（使用的是eclipse）"><span class="nav-number">3.</span> <span class="nav-text">3 环境搭建（使用的是eclipse）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-利用maven导入相关jar包"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 利用maven导入相关jar包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-创建properties文件，用于存放数据库相关信息"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 创建properties文件，用于存放数据库相关信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-创建spring配置文件"><span class="nav-number">3.3.</span> <span class="nav-text">3.3 创建spring配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-1-配置properties文件的bean"><span class="nav-number">3.3.1.</span> <span class="nav-text">3.3.1 配置properties文件的bean</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-2-配置数据库连接池"><span class="nav-number">3.3.2.</span> <span class="nav-text">3.3.2 配置数据库连接池</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-3-配置jdbcTemplate"><span class="nav-number">3.3.3.</span> <span class="nav-text">3.3.3 配置jdbcTemplate</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-4-配置组件扫描"><span class="nav-number">3.3.4.</span> <span class="nav-text">3.3.4 配置组件扫描</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-项目结构图"><span class="nav-number">3.4.</span> <span class="nav-text">3.4 项目结构图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-代码实现数据库操作"><span class="nav-number">4.</span> <span class="nav-text">4 代码实现数据库操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-编写实体类"><span class="nav-number">4.1.</span> <span class="nav-text">4.1 编写实体类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-编写UserDao接口"><span class="nav-number">4.2.</span> <span class="nav-text">4.2 编写UserDao接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-编写UserDao接口的实现类UserDaoImpl"><span class="nav-number">4.3.</span> <span class="nav-text">4.3 编写UserDao接口的实现类UserDaoImpl</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-项目结构图"><span class="nav-number">4.4.</span> <span class="nav-text">4.4 项目结构图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-测试类"><span class="nav-number">5.</span> <span class="nav-text">5 测试类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-测试前需要启动spring容器，因为我们的代码中使用到了spring容器的功能"><span class="nav-number">5.1.</span> <span class="nav-text">5.1 测试前需要启动spring容器，因为我们的代码中使用到了spring容器的功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-编写测试方法"><span class="nav-number">5.2.</span> <span class="nav-text">5.2 编写测试方法</span></a></li></ol></li></ol></div></div></section></div></aside><div class="sfix"><div class="fixedme"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9477174171188196" data-ad-slot="9597600460" data-ad-format="auto"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></div></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2018</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Hello</span></div><div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div><span class="post-meta-divider">|</span><div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script></body></html><!-- rebuild by neat -->